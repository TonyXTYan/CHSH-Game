<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CHSH Game - Presenter Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
    <script src="dashboard-socket.js"></script>
</head>
<body>
    <h1>CHSH Game - Presenter Dashboard</h1>
    <div id="connection-status-dash">Connecting...</div>

    <div class="dashboard-container">
        <div class="panel metrics">
            <div class="metric-card">
                <h3>Active Teams</h3>
                <p id="active-teams-count">0</p>
            </div>
            <div class="metric-card">
                <h3>Total Players</h3>
                <p id="total-players-count">0</p>
            </div>
            <div class="metric-card">
                <h3>Total Answers</h3>
                <p id="total-answers-count">0</p>
            </div>
            <div class="metric-card download-card">
                <h3>Download Data</h3>
                <button id="download-data-btn">Download CSV</button>
            </div>
            <div class="metric-card">
                <h3 id="game-control-text">Game Control</h3>
                <button id="start-game-btn">Start Game</button>
            </div>
        </div>

        <div class="panel">
            <h2>Active Teams</h2>
            <table id="active-teams-table">
                <thead><tr><th>Team Name</th><th>Team ID</th><th>Player 1 SID</th><th>Player 2 SID</th><th>Current Round</th><th>Min Stats Sig</th><th>History Hash 1 (SHA-256)</th><th>History Hash 2 (MD5)</th></tr></thead>
                <tbody></tbody>
            </table>
            <p id="no-active-teams">No active teams yet.</p>
        </div>

        <div class="panel">
            <div class="answer-log-header">
                <h2>Live Answer Log</h2>
                <span id="toggle-chevron">â–¶</span>
                <span class="streaming-label">streaming</span>
                <button id="toggle-answers-btn" class="toggle-off">OFF</button>
            </div>
            <table id="answer-log-table">
                <thead><tr><th>Timestamp</th><th>Team Name</th><th>Player SID</th><th>Round ID</th><th>Item</th><th>Answer</th></tr></thead>
                <tbody></tbody>
            </table>
            <p id="no-answers-log">No answers streamed yet.</p>
        </div>
    </div>
</body>
</html>
